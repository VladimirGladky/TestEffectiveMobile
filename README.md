# TestEffectiveMobile
## –û –ø—Ä–æ–µ–∫—Ç–µ
REST-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ–± –æ–Ω–ª–∞–π–Ω-–ø–æ–¥–ø–∏—Å–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| POST | /api/v1/create | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ |
| GET | /api/v1/list/{user_id} | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | /api/v1/sum | –†–∞—Å—á–µ—Ç —Å—É–º–º—ã –ø–æ–¥–ø–∏—Å–æ–∫ |
| GET | /api/v1/read/{id} | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ id |
| PUT | /api/v1/update/{id} | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ id |
| DELETE | /api/v1/delete/{id} | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ id |

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–í –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **PostgreSQL**.

### üõ†Ô∏è –ú–∏–≥—Ä–∞—Ü–∏–∏

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ [`migrations/`](./migrations).

### üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `subscriptions`:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| id | VARCHAR(255) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–ø–∏—Å–∫–∏ |
| service_name | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ |
| price | INT | –¶–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏ |
| user_id | VARCHAR(255) | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| start_date | DATE | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—Å–∫–∏ |
| end_date | DATE | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ |

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ —è–∑—ã–∫–µ **Go** –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

#### –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:
- **Go** (–≤–µ—Ä—Å–∏—è 1.24.0)

## üìö –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∫–ª—é—á–µ–≤—ã–µ Go-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

### üîë –û—Å–Ω–æ–≤–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
|------------|------------|--------------|
| `github.com/google/uuid` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä—Å–∏–Ω–≥ UUID (—É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤) | [—Å—Å—ã–ª–∫–∞](https://github.com/google/uuid) |
| `github.com/gorilla/mux` | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ middleware | [—Å—Å—ã–ª–∫–∞](https://github.com/gorilla/mux) |
| `github.com/joho/godotenv` | –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `.env` —Ñ–∞–π–ª–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è | [—Å—Å—ã–ª–∫–∞](https://github.com/joho/godotenv) |
| `github.com/ilyakaznacheev/cleanenv` | –ß—Ç–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Ñ–∞–π–ª–æ–≤ | [—Å—Å—ã–ª–∫–∞](https://github.com/ilyakaznacheev/cleanenv) |

### üóÉÔ∏è –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
|------------|------------|--------------|
| `github.com/golang-migrate/migrate/v4` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ, –æ—Ç–∫–∞—Ç) | [—Å—Å—ã–ª–∫–∞](https://github.com/golang-migrate/migrate) |
| `github.com/jackc/pgx/v5` | –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º | [—Å—Å—ã–ª–∫–∞](https://github.com/jackc/pgx) |

### üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
|------------|------------|--------------|
| `go.uber.org/zap` | –ë—ã—Å—Ç—Ä–æ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –æ–≤–µ—Ä—Ö–µ–¥–æ–º | [—Å—Å—ã–ª–∫–∞](https://go.uber.org/zap) |

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
‚îú‚îÄ‚îÄ cmd/ #–û—Å–Ω–æ–≤–Ω–æ–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ config/ #–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ docs/ # Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ internal/ # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ app/ # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 
‚îÇ   ‚îú‚îÄ‚îÄ config/ # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models/ # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ repository/ # –°–ª–æ–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ service/ # –°–ª–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ transport/ # –°–ª–æ–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
‚îú‚îÄ‚îÄ migrations/ # –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ pkg/ # –ü—É–±–ª–∏—á–Ω—ã–µ –ø–∞–∫–µ—Ç—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–∑–≤–Ω–µ (reusable)
‚îÇ   ‚îú‚îÄ‚îÄ logger/ # –ü–∞–∫–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ postgres/ # –ü–∞–∫–µ—Ç —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL
```

## üìö –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

```
git clone https://github.com/VladimirGladky/TestEffectiveMobile.git
```

```
cd TestEffectiveMobile
```

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç , –Ω–æ –¥–ª—è —ç—Ç–æ–≥—Ç –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Go –≤–µ—Ä—Å–∏–∏ 1.24.0
–°—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è: [Go Download](https://go.dev/doc/install)

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∞–≥–µ–Ω—Ç–∞ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ , –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ–π

```bash
go mod download

```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
docker compose up
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:4047/api/v1

–ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
docker compose down
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ –≤—Å–µ–º–∏ –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏

1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

```bash
curl -X POST -H "Content-Type: application/json" -d '{"service_name":"Netflix","price":100,"user_id":"user123","start_date":"06-2025","end_date":"11-2025"}' http://localhost:4047/api/v1/create
```

–í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∞–µ–º id —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏:

```bash
{"id":"1bccafaa-9a3a-4f0c-9223-c1863c2c2b5b"}
```

2. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ id 

```bash
curl -X GET http://localhost:4047/api/v1/read/1bccafaa-9a3a-4f0c-9223-c1863c2c2b5b
```

–í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É:

```bash
{
    "service_name":"Netflix",
    "price":100,
    "id":"1bccafaa-9a3a-4f0c-9223-c1863c2c2b5b",
    "user_id":"user123",
    "start_date":"06-2025",
    "end_date":"11-2025"
}
```

3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ id 

```bash
curl -X PUT -H "Content-Type: application/json" -d '{"service_name":"Netflix3","price":500,"start_date":"08-2025","end_date":"12-2025"}' http://localhost:4047/api/v1/update/1bccafaa-9a3a-4f0c-9223-c1863c2c2b5b
```

–í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∞–µ–º , —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –±—ã–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞:

```bash
{"message":"Updated"}
```

4. –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ id 

```bash
curl -X DELETE http://localhost:4047/api/v1/delete/1bccafaa-9a3a-4f0c-9223-c1863c2c2b5b
```

–í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∞–µ–º , —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞:

```bash
{"message":"Deleted"}
```

5. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ id 

```bash
curl -X GET http://localhost:4047/api/v1/list/user123
```

–í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```bash
{
    "subscriptions":
        [
            {
              "service_name":"Netflix","price":100,"id":"d0b9c37b-6566-4792-ab98-71e9b5fd251e",
              "user_id":"user123","start_date":"06-2025","end_date":"11-2025"
            },
            {
              "service_name":"Netflix","price":100,"id":"3e33a070-4545-465f-b5f3-8ee1c216f921",
              "user_id":"user123","start_date":"07-2025","end_date":"12-2025"
            }
        ]
}
```

6. –†–∞—Å—á–µ—Ç —Å—É–º–º—ã –ø–æ–¥–ø–∏—Å–æ–∫ , —Ç—É—Ç –º–æ–∂–Ω–æ –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã start_date , end_date , user_id , service_name
    –ø–∞—Ä–∞–º–µ—Ç—Ä—ã start_date –∏ end_date –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ MM-YYYY - –Ω–∞–ø—Ä–∏–º–µ—Ä 06-2025

```bash
curl -X GET http://localhost:4047/api/v1/sum?start_date=05-2025&end_date=12-2025&service_name=Netflix&user_id=user123
```

–í –æ—Ç–≤–µ—Ç –º—ã –ø–æ–ª—É—á–∞–µ–º —Å—É–º–º—É –ø–æ–¥–ø–∏—Å–æ–∫:

```bash
{"sum":200}
```

## Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:4047/swagger/index.html



